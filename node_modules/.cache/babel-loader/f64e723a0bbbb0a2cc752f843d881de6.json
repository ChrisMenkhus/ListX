{"ast":null,"code":"import _slicedToArray from \"/home/toad/Documents/react-projects/lists-but-cards/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/toad/Documents/react-projects/lists-but-cards/src/pages/Page_Lists.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { Button } from '../components';\nimport styled from 'styled-components';\nimport Container from '../components/Container.js';\nimport { primary } from '../components/Colors.js';\nconst Style = styled.div`\n\tcolor: black;\n\n  h1 {\n    font-size: 1.2rem; margin: 0; padding: 0;\n    width: 80%;\n    border-bottom: 1px solid white;\n    margin-bottom: 10px;\n  }\n\n  p {\n    font-size: 1rem;\n    padding: 0px; margin: 4px;\n    text-align: left;\n    margin-right: auto;\n  }\n\n  input {\n    font-size: 1rem;\n    margin-bottom: 10px;\n  }\n\n  Button {\n    padding: 2px;\n    border-radius: 1px;\n    margin-bottom: 10px;\n    margin: 20px;\n  }\n\n  .list {\n    display: flex;\n    flex-direction: column;\n    padding: 4px;\n    width: 100%;\n    text-align: left;\n    .row {\n      display: flex;\n      flex-direction: row;\n      margin-bottom: 4px;\n    }\n\n    Button {      \n      margin-left: auto;\n      padding: 4px 12px 4px 12px; margin: 0px;\n      line-height: 24px;\n      margin-right: 2px;\n    }\n  }\n`;\n\nfunction Lists(props) {\n  const _useState = useState(''),\n        _useState2 = _slicedToArray(_useState, 2),\n        itemsInlist = _useState2[0],\n        setItemsInlist = _useState2[1];\n\n  const _useState3 = useState(''),\n        _useState4 = _slicedToArray(_useState3, 2),\n        lists = _useState4[0],\n        setLists = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        newItemText = _useState6[0],\n        setNewItemText = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        newListText = _useState8[0],\n        setNewListText = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        selectedList = _useState10[0],\n        setSelectedList = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        selectedListTitle = _useState12[0],\n        setSelectedListTitle = _useState12[1]; // 503c7d47-20ae-4e1d-9b24-05bcef36a06c\n\n\n  const createYourListsView = async () => {\n    fetch('http://localhost:3000/readlists', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: props.user_id\n      })\n    }).then(response => response.json()).then(res => {\n      if (res) {\n        getJSXfromLists(res).then(data => {\n          setLists(data);\n        });\n      }\n    });\n  };\n\n  const getJSXfromLists = async res => {\n    return res.map(list => {\n      return React.createElement(\"div\", {\n        className: \"row\",\n        key: list.list_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, list.title), React.createElement(Button, {\n        onClick: () => {\n          removeListFromYourLists(list.list_id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"x\"), React.createElement(Button, {\n        onClick: () => {\n          createSelectedListView(list.list_id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"\\uD83D\\uDC41\"));\n    });\n  };\n\n  const createSelectedListView = listToView => {\n    fetch('http://localhost:3000/readlist', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        list_id: listToView\n      })\n    }).then(response => response.json()).then(res => {\n      setSelectedList(res.list_id);\n      setSelectedListTitle(res.title);\n      let newList = [];\n      if (res != null) if (res.list_entries) {\n        newList = res.list_entries.map(entry => {\n          return React.createElement(\"div\", {\n            className: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 120\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, entry), React.createElement(Button, {\n            onClick: () => {\n              removeItemFromList(listToView, entry);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          }, \"x\"));\n        });\n      }\n      setItemsInlist(newList);\n    });\n  };\n\n  const addListToYourLists = event => {\n    fetch('http://localhost:3000/createlist', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        user_id: props.user_id,\n        title: newListText\n      })\n    }).then(response => response.json()).then(res => {\n      createSelectedListView(res.list_id);\n      createYourListsView();\n    });\n  };\n\n  const removeListFromYourLists = listToDelete => {\n    fetch('http://localhost:3000/deletelist', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        list_id: listToDelete\n      })\n    }).then(response => response.json()).then(res => {\n      createYourListsView();\n      console.log(res);\n    });\n  };\n\n  const addNewItemToList = (listToView, entry) => {\n    fetch('http://localhost:3000/updatelist', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        list_id: listToView,\n        entry: entry\n      })\n    }).then(response => response.json()).then(res => {\n      console.log(res);\n      createSelectedListView(listToView);\n    });\n  };\n\n  const removeItemFromList = (listToView, entry) => {\n    fetch('http://localhost:3000/updatelist', {\n      method: 'post',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        list_id: listToView,\n        entry: entry,\n        deleteEntry: true\n      })\n    }).then(response => response.json()).then(res => {\n      console.log(res.list_entries);\n      createSelectedListView(listToView);\n    });\n  };\n\n  useEffect(() => {\n    createYourListsView();\n  }, [props.user_id]);\n  return React.createElement(Style, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, props.isLogged ? React.createElement(Container, {\n    margin: \"0px\",\n    flexdirection: \"row\",\n    height: \"70vh\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(Container, {\n    className: \"myLists\",\n    margin: \"20px auto\",\n    bg: primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, \"Your Lists\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"Create new list\"), React.createElement(Container, {\n    flexdirection: \"row\",\n    margin: \"0px\",\n    padding: \"0px\",\n    bg: \"none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => {\n      setNewListText(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: () => {\n      addListToYourLists();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, \"Create\")), React.createElement(\"div\", {\n    className: \"list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, lists)), React.createElement(Container, {\n    className: \"selectedListContainer\",\n    margin: \"20px auto\",\n    bg: primary,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, selectedListTitle ? selectedListTitle : 'Selected List'), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, \"Add new item\"), React.createElement(Container, {\n    flexdirection: \"row\",\n    margin: \"0px\",\n    padding: \"0px\",\n    bg: \"none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => {\n      setNewItemText(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }), React.createElement(Button, {\n    onClick: () => {\n      addNewItemToList(selectedList, newItemText);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, \"Add\")), React.createElement(\"div\", {\n    className: \"list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, itemsInlist))) : React.createElement(Redirect, {\n    to: \"/\",\n    exact: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }));\n}\n\nexport default Lists;","map":{"version":3,"sources":["/home/toad/Documents/react-projects/lists-but-cards/src/pages/Page_Lists.js"],"names":["React","useState","useEffect","useRef","Redirect","Button","styled","Container","primary","Style","div","Lists","props","itemsInlist","setItemsInlist","lists","setLists","newItemText","setNewItemText","newListText","setNewListText","selectedList","setSelectedList","selectedListTitle","setSelectedListTitle","createYourListsView","fetch","method","headers","body","JSON","stringify","user_id","then","response","json","res","getJSXfromLists","data","map","list","list_id","title","removeListFromYourLists","createSelectedListView","listToView","newList","list_entries","entry","removeItemFromList","addListToYourLists","event","listToDelete","console","log","addNewItemToList","deleteEntry","isLogged","e","target","value"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,MAApC,QAAiD,OAAjD;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,MAAR,QAAqB,eAArB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,SAAQC,OAAR,QAAsB,yBAAtB;AAEA,MAAMC,KAAK,GAAGH,MAAM,CAACI,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAzB;;AAkDA,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA,oBACkBX,QAAQ,CAAC,EAAD,CAD1B;AAAA;AAAA,QACbY,WADa;AAAA,QACAC,cADA;;AAAA,qBAEMb,QAAQ,CAAC,EAAD,CAFd;AAAA;AAAA,QAEbc,KAFa;AAAA,QAENC,QAFM;;AAAA,qBAGkBf,QAAQ,CAAC,EAAD,CAH1B;AAAA;AAAA,QAGbgB,WAHa;AAAA,QAGAC,cAHA;;AAAA,qBAIkBjB,QAAQ,CAAC,EAAD,CAJ1B;AAAA;AAAA,QAIbkB,WAJa;AAAA,QAIAC,cAJA;;AAAA,qBAKoBnB,QAAQ,CAAC,EAAD,CAL5B;AAAA;AAAA,QAKboB,YALa;AAAA,QAKCC,eALD;;AAAA,sBAM8BrB,QAAQ,CAAC,EAAD,CANtC;AAAA;AAAA,QAMbsB,iBANa;AAAA,QAMMC,oBANN,mBAOpB;;;AAEA,QAAMC,mBAAmB,GAAG,YAAY;AACxCC,IAAAA,KAAK,CAAC,iCAAD,EAAoC;AACvCC,MAAAA,MAAM,EAAE,MAD+B;AAEvCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF8B;AAGvCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,OAAO,EAAEpB,KAAK,CAACoB;AADI,OAAf;AAHiC,KAApC,CAAL,CAOCC,IAPD,CAOMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPlB,EAQCF,IARD,CAQMG,GAAG,IAAI;AACX,UAAIA,GAAJ,EAAS;AACPC,QAAAA,eAAe,CAACD,GAAD,CAAf,CAAqBH,IAArB,CAA0BK,IAAI,IAAI;AAChCtB,UAAAA,QAAQ,CAACsB,IAAD,CAAR;AACD,SAFD;AAGD;AACA,KAdH;AAeC,GAhBD;;AAkBA,QAAMD,eAAe,GAAG,MAAOD,GAAP,IAAe;AACnC,WAAQA,GAAG,CAACG,GAAJ,CAAUC,IAAD,IAAU;AACzB,aACE;AAAK,QAAA,SAAS,EAAC,KAAf;AAAqB,QAAA,GAAG,EAAEA,IAAI,CAACC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAID,IAAI,CAACE,KAAT,CADF,EAEE,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAI;AACnBC,UAAAA,uBAAuB,CAACH,IAAI,CAACC,OAAN,CAAvB;AACC,SAFH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAFF,EAME,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAI;AACnBG,UAAAA,sBAAsB,CAACJ,IAAI,CAACC,OAAN,CAAtB;AAAqC,SADvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBANF,CADF;AAYD,KAbO,CAAR;AAcH,GAfD;;AAiBA,QAAMG,sBAAsB,GAAIC,UAAD,IAAgB;AAC/CnB,IAAAA,KAAK,CAAC,gCAAD,EAAmC;AACtCC,MAAAA,MAAM,EAAE,MAD8B;AAEtCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF6B;AAGtCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBU,QAAAA,OAAO,EAAEI;AADU,OAAf;AAHgC,KAAnC,CAAL,CAOCZ,IAPD,CAOMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPlB,EAQCF,IARD,CAQMG,GAAG,IAAI;AACXd,MAAAA,eAAe,CAACc,GAAG,CAACK,OAAL,CAAf;AACAjB,MAAAA,oBAAoB,CAACY,GAAG,CAACM,KAAL,CAApB;AAEA,UAAII,OAAO,GAAG,EAAd;AACA,UAAIV,GAAG,IAAI,IAAX,EACA,IAAIA,GAAG,CAACW,YAAR,EAAsB;AACpBD,QAAAA,OAAO,GAAGV,GAAG,CAACW,YAAJ,CAAiBR,GAAjB,CAAsBS,KAAD,IAAW;AACxC,iBACE;AAAK,YAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAIA,KAAJ,CADF,EAEE,oBAAC,MAAD;AAAQ,YAAA,OAAO,EAAE,MAAI;AAACC,cAAAA,kBAAkB,CAACJ,UAAD,EAAaG,KAAb,CAAlB;AAAsC,aAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,CADF;AAMD,SAPS,CAAV;AAQD;AAEDlC,MAAAA,cAAc,CAACgC,OAAD,CAAd;AACC,KA1BH;AA2BC,GA5BD;;AA8BA,QAAMI,kBAAkB,GAAGC,KAAK,IAAI;AACpCzB,IAAAA,KAAK,CAAC,kCAAD,EAAqC;AACxCC,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF+B;AAGxCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,OAAO,EAAEpB,KAAK,CAACoB,OADI;AAEnBU,QAAAA,KAAK,EAAEvB;AAFY,OAAf;AAHkC,KAArC,CAAL,CAQCc,IARD,CAQMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARlB,EASCF,IATD,CASMG,GAAG,IAAI;AAEVQ,MAAAA,sBAAsB,CAACR,GAAG,CAACK,OAAL,CAAtB;AACAhB,MAAAA,mBAAmB;AACrB,KAbD;AAcC,GAfD;;AAiBA,QAAMkB,uBAAuB,GAAIS,YAAD,IAAkB;AAClD1B,IAAAA,KAAK,CAAC,kCAAD,EAAqC;AACxCC,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF+B;AAGxCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBU,QAAAA,OAAO,EAAEW;AADU,OAAf;AAHkC,KAArC,CAAL,CAOCnB,IAPD,CAOMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAPlB,EAQCF,IARD,CAQMG,GAAG,IAAI;AACXX,MAAAA,mBAAmB;AACnB4B,MAAAA,OAAO,CAACC,GAAR,CAAYlB,GAAZ;AACD,KAXD;AAYC,GAbD;;AAgBA,QAAMmB,gBAAgB,GAAG,CAACV,UAAD,EAAaG,KAAb,KAAuB;AAChDtB,IAAAA,KAAK,CAAC,kCAAD,EAAqC;AACxCC,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF+B;AAGxCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBU,QAAAA,OAAO,EAAEI,UADU;AAEnBG,QAAAA,KAAK,EAAEA;AAFY,OAAf;AAHkC,KAArC,CAAL,CAQCf,IARD,CAQMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARlB,EASCF,IATD,CASMG,GAAG,IAAI;AACViB,MAAAA,OAAO,CAACC,GAAR,CAAYlB,GAAZ;AACAQ,MAAAA,sBAAsB,CAACC,UAAD,CAAtB;AACF,KAZD;AAaC,GAdD;;AAgBA,QAAMI,kBAAkB,GAAG,CAACJ,UAAD,EAAaG,KAAb,KAAuB;AAClDtB,IAAAA,KAAK,CAAC,kCAAD,EAAqC;AACxCC,MAAAA,MAAM,EAAE,MADgC;AAExCC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAF+B;AAGxCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBU,QAAAA,OAAO,EAAEI,UADU;AAEnBG,QAAAA,KAAK,EAAEA,KAFY;AAGnBQ,QAAAA,WAAW,EAAE;AAHM,OAAf;AAHkC,KAArC,CAAL,CASCvB,IATD,CASMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EATlB,EAUCF,IAVD,CAUMG,GAAG,IAAI;AACXiB,MAAAA,OAAO,CAACC,GAAR,CAAYlB,GAAG,CAACW,YAAhB;AACAH,MAAAA,sBAAsB,CAACC,UAAD,CAAtB;AACD,KAbD;AAcC,GAfD;;AAkBA3C,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,mBAAmB;AACpB,GAFQ,EAEN,CAACb,KAAK,CAACoB,OAAP,CAFM,CAAT;AAIA,SACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpB,KAAK,CAAC6C,QAAN,GACC,oBAAC,SAAD;AAAW,IAAA,MAAM,EAAC,KAAlB;AAAwB,IAAA,aAAa,EAAC,KAAtC;AAA4C,IAAA,MAAM,EAAC,MAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,SAArB;AAA+B,IAAA,MAAM,EAAC,WAAtC;AAAkD,IAAA,EAAE,EAAEjD,OAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFF,EAGE,oBAAC,SAAD;AAAW,IAAA,aAAa,EAAC,KAAzB;AAA+B,IAAA,MAAM,EAAC,KAAtC;AAA4C,IAAA,OAAO,EAAC,KAApD;AAA0D,IAAA,EAAE,EAAC,MAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,QAAQ,EAAGkD,CAAD,IAAK;AAACtC,MAAAA,cAAc,CAACsC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;AAA+B,KAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEA,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAI;AAAEV,MAAAA,kBAAkB;AAAI,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFA,CAHF,EAOE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnC,KADH,CAPF,CAFF,EAeE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,uBAArB;AAA6C,IAAA,MAAM,EAAC,WAApD;AAAgE,IAAA,EAAE,EAAEP,OAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKe,iBAAiB,GAAGA,iBAAH,GAAuB,eAA7C,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,EAGE,oBAAC,SAAD;AAAW,IAAA,aAAa,EAAC,KAAzB;AAA+B,IAAA,MAAM,EAAC,KAAtC;AAA4C,IAAA,OAAO,EAAC,KAApD;AAA0D,IAAA,EAAE,EAAC,MAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,QAAQ,EAAGmC,CAAD,IAAK;AAACxC,MAAAA,cAAc,CAACwC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;AAA+B,KAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAED,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE,MAAI;AAClBL,MAAAA,gBAAgB,CAAClC,YAAD,EAAcJ,WAAd,CAAhB;AACC,KAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFC,CAHF,EASE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,WADH,CATF,CAfF,CADD,GAgCC,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,GAAb;AAAiB,IAAA,KAAK,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjCJ,CADF;AAsCD;;AACD,eAAeF,KAAf","sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {Button} from '../components'\nimport styled from 'styled-components'\nimport Container from '../components/Container.js'\nimport {primary} from '../components/Colors.js'\n\nconst Style = styled.div`\n\tcolor: black;\n\n  h1 {\n    font-size: 1.2rem; margin: 0; padding: 0;\n    width: 80%;\n    border-bottom: 1px solid white;\n    margin-bottom: 10px;\n  }\n\n  p {\n    font-size: 1rem;\n    padding: 0px; margin: 4px;\n    text-align: left;\n    margin-right: auto;\n  }\n\n  input {\n    font-size: 1rem;\n    margin-bottom: 10px;\n  }\n\n  Button {\n    padding: 2px;\n    border-radius: 1px;\n    margin-bottom: 10px;\n    margin: 20px;\n  }\n\n  .list {\n    display: flex;\n    flex-direction: column;\n    padding: 4px;\n    width: 100%;\n    text-align: left;\n    .row {\n      display: flex;\n      flex-direction: row;\n      margin-bottom: 4px;\n    }\n\n    Button {      \n      margin-left: auto;\n      padding: 4px 12px 4px 12px; margin: 0px;\n      line-height: 24px;\n      margin-right: 2px;\n    }\n  }\n`;\n\nfunction Lists(props) {\n  const [itemsInlist, setItemsInlist] = useState('');\n  const [lists, setLists] = useState('');\n  const [newItemText, setNewItemText] = useState('');\n  const [newListText, setNewListText] = useState('');\n  const [selectedList, setSelectedList] = useState('');\n  const [selectedListTitle, setSelectedListTitle] = useState('');\n  // 503c7d47-20ae-4e1d-9b24-05bcef36a06c\n\n  const createYourListsView = async () => {\n  fetch('http://localhost:3000/readlists', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      user_id: props.user_id,\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n    if (res) {\n      getJSXfromLists(res).then(data => {\n        setLists(data); \n      })\n    }\n    })  \n  };\n\n  const getJSXfromLists = async (res) => {\n      return (res.map( (list) => {\n        return (\n          <div className='row' key={list.list_id}>\n            <p>{list.title}</p>\n            <Button onClick={()=>{\n              removeListFromYourLists(list.list_id);\n              }\n              }>x</Button>\n            <Button onClick={()=>{\n              createSelectedListView(list.list_id)}\n              }>👁</Button>\n          </div> \n        )\n      }))\n  }\n\n  const createSelectedListView = (listToView) => { \n  fetch('http://localhost:3000/readlist', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      list_id: listToView\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n    setSelectedList(res.list_id);\n    setSelectedListTitle(res.title);\n    \n    let newList = [];\n    if (res != null)\n    if (res.list_entries) {\n      newList = res.list_entries.map((entry) => {\n        return (\n          <div className='row'>\n            <p>{entry}</p>\n            <Button onClick={()=>{removeItemFromList(listToView, entry)}}>x</Button>\n          </div> \n        )\n      })\n    } \n\n    setItemsInlist(newList);  \n    })  \n  };\n\n  const addListToYourLists = event => {\n  fetch('http://localhost:3000/createlist', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      user_id: props.user_id,\n      title: newListText\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n     \n     createSelectedListView(res.list_id);\n     createYourListsView(); \n  })  \n  };\n\n  const removeListFromYourLists = (listToDelete) => {\n  fetch('http://localhost:3000/deletelist', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      list_id: listToDelete\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n    createYourListsView();\n    console.log(res);\n  })    \n  }\n  \n\n  const addNewItemToList = (listToView, entry) => {\n  fetch('http://localhost:3000/updatelist', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      list_id: listToView,\n      entry: entry\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n     console.log(res);\n     createSelectedListView(listToView);\n  })  \n  };\n\n  const removeItemFromList = (listToView, entry) => {\n  fetch('http://localhost:3000/updatelist', {\n    method: 'post',\n    headers: {'Content-type': 'application/json'},\n    body: JSON.stringify({\n      list_id: listToView,\n      entry: entry,\n      deleteEntry: true\n    })\n  })\n  .then(response => response.json())\n  .then(res => {\n    console.log(res.list_entries);\n    createSelectedListView(listToView);\n  })    \n  };\n\n\n  useEffect(() => {\n    createYourListsView();\n  }, [props.user_id]);\n\n  return (\n    <Style>\n      {props.isLogged ? \n        <Container margin='0px' flexdirection='row' height='70vh'>\n\n          <Container className='myLists' margin='20px auto' bg={primary}>\n            <h1>Your Lists</h1>\n            <p>Create new list</p> \n            <Container flexdirection='row' margin='0px' padding='0px' bg='none'>\n              <input type='text' onChange={(e)=>{setNewListText(e.target.value)}} />\n            <Button onClick={()=>{ addListToYourLists() }}>Create</Button>\n            </Container>\n            <div className='list'>\n              {lists}\n            </div>\n          </Container>\n\n\n          <Container className='selectedListContainer' margin='20px auto' bg={primary}>\n            <h1>{selectedListTitle ? selectedListTitle : 'Selected List'}</h1>\n            <p>Add new item</p>\n            <Container flexdirection='row' margin='0px' padding='0px' bg='none'>\n              <input type='text' onChange={(e)=>{setNewItemText(e.target.value)}} />\n          \t<Button onClick={()=>{\n              addNewItemToList(selectedList,newItemText)\n              }}>Add</Button>\n            </Container>\n            <div className='list'>\n              {itemsInlist}\n            </div>\n          </Container>\n\n        </Container>\n      :\n        <Redirect to='/' exact/>\n      }\n    </Style>\n  );\n}\nexport default Lists;\n"]},"metadata":{},"sourceType":"module"}